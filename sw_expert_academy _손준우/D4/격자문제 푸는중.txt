#include <iostream>
#include <string.h>
#include <set>
using namespace std;
int T;
char a[5][5];
int dx[] = {0,-1,0,1,0};
int dy[] = {0,0,1,0,-1};
bool d[4][4][4][4][4];
set<int> s;
int ans=0;
FILE *in;
void setting_Case(){
	for(int i = 1 ; i <= 4 ; i++){
		for(int j=1 ; j<=4 ; j++){
			int temp;
			fscanf(in,"%d",&temp);
			a[i][j] = temp+'0';
			cout << a[i][j];
		}
		cout << '\n';
	}
}
void dfsd(int r, int c, string tse, int count, int tad[6]){
	int ad[6];
	string se = tse;
	copy(tad, tad + 6, ad);
	if(r<=4 && c<=4 && r>0 && c>0){
		if(d[ad[1]][ad[2]][ad[3]][ad[4]][ad[5]]==true){
			return;
		}else{
			d[ad[1]][ad[2]][ad[3]][ad[4]][ad[5]]=true;
			se += a[r][c];
		}
		if(count == 6){
			int intValue = atoi(se.c_str());
			pair<set<int>::iterator, bool> is_there;
			is_there=s.insert(intValue);
			if(is_there.second == true){
				ans++;
				cout << intValue <<'\n';
			}
			return;
		} else{
			for(int i=1 ; i<= 4 ; i++){
				ad[count]=i;
				dfsd(r+dx[i],c+dy[i],se,count+1,ad);
			}
		
		}
	
		
	}
}
int main() {
	in = fopen("a.txt","r");
	fscanf(in,"%d",&T);
	for(int i = 1 ; i<=T; i++){
		setting_Case();
	for(int i = 1 ; i <= 4 ; i++){
		for(int j=1 ; j<=4 ; j++){
			int ad[6]={0,};
			string temp;
			temp = a[i][j];
			memset(d,false,sizeof(d));
			dfsd(i,j,temp,1,ad);
		}
	}
		
		
		
		
	}
	printf("%d",ans);
	// your code goes here
	system("pause");
}
